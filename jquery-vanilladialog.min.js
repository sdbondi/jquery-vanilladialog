(function(a,b){var c=function(){this.initialize.apply(this,arguments)};c._instanceCount=0;c._initializeStatic=function(){var f=c.$window=b(a),d=40,g=false,e=c.resizeHandler=function(){if(g){return}g=true;a.setTimeout(function(){c.windowWidth=b(this).width();c.windowHeight=b(this).height();g=false},d)};f.on("resize",e);e.call(a)};c._staticTearDown=function(){c.$window.off("resize",c.resizeHandler);delete c.$window};c.prototype={initialize:function(d){if(d){this.setOptions(d)}this.$body=b(a.document.body);this.$this=b(this);this.closeHandler=function(){this.close()}.bind(this)},options:{overlayOpacity:0.7,overlayCss:null,content:null,animateTime:200,closeSelector:null,onClose:null,onShow:null,onKeydown:null,onOverlayClicked:null,classes:[],css:{},offsets:{top:0,left:0,width:0,height:0}},$this:null,$overlay:null,$container:null,$content:null,$body:null,isResizing:false,isShown:false,closeHandler:null,events:{overlay_Click:function(f){var d=this.options;if(d.onOverlayClicked&&d.onOverlayClicked.apply(this,[f])===false){return false}this.close();return false},document_KeyDown:function(f){var d=this.options;if(d.onKeyDown&&d.onKeyDown.apply(this,[f])===false){return false}if(f.keyCode===27){this.close()}},window_Resize:function(){if(this.isResizing||!this.$content){return}this.isResizing=true;var d=this;a.setTimeout(function(){d.resize();d.isResizing=false},100)}},resize:function(d){if(d){this.$container.stop().animate(this.getContentRect(),(!isNaN(d-0))?d:200)}else{this.$container.css(this.getContentRect())}this.$overlay.css({width:c.windowWidth,height:c.windowHeight});return this},_trigger:function(e,d){this.$this.triggerHandler.apply(this.$this,arguments)},on:function(f,d,g,e){if(typeof d==="string"){if(!this.$content){return this}if(d.length===0){Array.prototype.splice.apply(arguments,[1,1])}this.$content.on.apply(this.$content,arguments);return this}this.$this.on.apply(this.$this,arguments);return this},off:function(e,d,f){this.$content.off.apply(this.$content,arguments);this.$this.off.apply(this.$this,arguments);return this},getContent:function(e){if(!e){return this.$content}if(e instanceof c){return e.$content}var d=b(e);if(d.length){return d}return null},getContentRect:function(f){if(!f){f=this.$content}if(!f||!f.length){return null}var e=this.options,i=a.getComputedStyle(f[0]),d=this.options.css.width,h=this.options.css.height,g=false;if(this.$container&&this.$container.css("display")==="none"){this.$container.prop("visiblity",false).show();g=true}if(!d){d=f.width();if(d){d+=(i.getPropertyValue("padding-left").slice(0,-2)>>>0)+(i.getPropertyValue("padding-right").slice(0,-2)>>>0)+(i.getPropertyValue("border-left-width").slice(0,-2)>>>0)+(i.getPropertyValue("border-right-width").slice(0,-2)>>>0)}else{d="auto"}}if(!h){h=f.height();if(h){h+=(i.getPropertyValue("padding-top").slice(0,-2)>>>0)+(i.getPropertyValue("padding-bottom").slice(0,-2)>>>0)+(i.getPropertyValue("border-top-width").slice(0,-2)>>>0)+(i.getPropertyValue("border-bottom-width").slice(0,-2)>>>0)}else{h="auto"}}if(this.$container&&g){this.$container.prop("visiblity",true).hide()}var k=(c.windowHeight/2)-((h>>>0)/2)+e.offsets.top,j=(c.windowWidth/2)-((d>>>0)/2)+e.offsets.left;return{top:k,left:j,width:d,height:h}},select:function(d){if(!this.$content){return}return b(d,this.$content)},setOptions:function(d){b.extend(true,this.options,d);return this},setContent:function(i){var g=this.getContent(i);if(!g){throw new Error("No content")}this.$content=g;if(!this.isShown){return this}if(!this.$container){this.$container=this.createContainer()}var d=!!this.$container.parent().length,f=this.options,e=this;if(!d||!this.$container.is(":visible")){this.$container.hide().append(this.$content);this.$body.append(this.$container);var h=this.getContentRect();this.$container.css(b.extend(h,this.options.css)).fadeIn(f.animateTime,function(){e.afterShow.call(e)})}else{this.$container.children().fadeOut(f.animateTime,function(){b(this).remove();e.$content.hide();e.$container.append(e.$content);var j=e.getContentRect();e.$container.animate(j,f.animateTime,function(){e.$content.fadeIn(f.animateTime);e.afterShow.call(e)})})}return this},showOverlay:function(e){var d=!!this.$overlay.parent().length;if(d){return}this.$overlay.hide().on({click:this.events.overlay_Click.bind(this),selectstart:function(){return false}});this.$body.append(this.$overlay);this.$overlay.fadeIn(this.options.animateTime,e)},show:function(){if(++c._instanceCount===1){c._initializeStatic()}this.$overlay=this.createOverlay();var d=this;this.showOverlay(function(){d.isShown=true;d.setContent(d.options.content)});return this},afterShow:function(){var d=this.options;if(d.onShow&&d.onShow.call(this)===false){return}this._trigger("show");var e=this.events;b(d.closeSelector,this.$content).on("click",this.closeHandler.bind(this));if(!e.document_KeyDown.handler){e.document_KeyDown.handler=e.document_KeyDown.bind(this);b(this.$body).on("keydown",e.document_KeyDown.handler)}if(!e.window_Resize.handler){e.window_Resize.handler=e.window_Resize.bind(this);b(c.$window).on("resize",e.window_Resize.handler)}},close:function(){if(!this.$content){return}var d=this.options;if(d.onClose&&d.onClose.call(this)===false){return}this._trigger("close");var e=function(){b(this).remove()};this.$container.fadeOut(d.animateTime,e);this.$overlay.fadeOut(d.animateTime,e);this._tearDown();this.isShown=false;if(c._instanceCount===0){c._staticTearDown()}return this},_tearDown:function(){this.$content.off();this.$overlay.off();this.$body.off("keydown",this.events.document_KeyDown.handler);this.events.document_KeyDown.handler=null;c.$window.off("resize",this.events.window_Resize.handler);this.events.window_Resize.handler=null;this.$container=this.$content=this.$overlay=null;c._instanceCount--},createOverlay:function(){var d=this.options,e={opacity:d.overlayOpacity,backgroundColor:"#000",position:"fixed",top:0,left:0,width:b(a).width(),height:b(a).height()+10,zIndex:999};if(d.overlayCss){b.extend(e,d.overlayCss)}return b('<div class="vanilla-overlay"></div>').css(e)},createContainer:function(){var d=this.options,f=d.classes||[],e={position:"fixed",zIndex:1000,backgroundColor:"#FFF"};if(d.css){b.extend(e,d.css)}return b('<div class="'+f.join(" ")+' vanilla-content"></div>').css(e)}};b.VanillaDialog=function(d){return new c(d)}}(window,window.jQuery));